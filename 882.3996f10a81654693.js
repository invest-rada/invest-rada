"use strict";(self.webpackChunkinvest_rada=self.webpackChunkinvest_rada||[]).push([[882],{1882:(X,f,e)=>{e.r(f),e.d(f,{WatchlistModule:()=>N});var u=e(6895),b=e(433),l=e(6103),y=e(7860),m=e(1334),T=e(1054),v=e(2543),r=e(655),C=e(9594),x=e(1008),S=e(5849),W=e(6362),B=e(80);const O=function D(n,a){var o;return(0,B.Z)(n,function(s,i,Y){return!(o=a(s,i,Y))}),!!o};var Z=e(4177),M=e(4810);var d,c,R=e(7579),$=e(1135),p=e(2722),g=e(6814),t=e(1571),I=e(3941),j=e(4794),A=e(8117);function E(n,a){if(1&n&&(t.O4$(),t.kcU(),t.ynx(0),t._UZ(1,"app-widgets-brand",8),t.BQk()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("brandData",o.filteredBrandData)("labels",o.labels)("withCharts",!0)}}function U(n,a){1&n&&(t.O4$(),t.kcU(),t._UZ(0,"c-spinner"))}const z={borderWidth:2,fill:!0},J={backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff"};class h{constructor(a,o){this.stocksData=a,this.brand=o,this.dataStore$=this.stocksData.dataStore$,this.brandData=[],this.filteredBrandData=[],d.set(this,new R.x),c.set(this,new $.X("")),this.filterText$=(0,r.Q_)(this,c,"f").asObservable();const s=[];for(let i in g.i3)s.push((0,C.Z)(g.i3,i));this.labels=s}get filterText(){return(0,r.Q_)(this,c,"f").getValue()}set filterText(a){(0,r.Q_)(this,c,"f").next(a)}ngOnInit(){this.initBrands(),this.filterText$.pipe((0,p.R)((0,r.Q_)(this,d,"f"))).subscribe({next:a=>this.updateFilteredData(a)})}updateFilteredData(a){this.filteredBrandData=this.brandData.filter(o=>function F(n,a,o){var s=(0,Z.Z)(n)?S.Z:O;return o&&(0,M.Z)(n,a,o)&&(a=void 0),s(n,(0,W.Z)(a,3))}((0,x.Z)(o.values.map(i=>Object.values(i))),i=>i.toLowerCase().includes(a.toLowerCase())))}updateFilterText(a){this.filterText=a.target.value}isLoaded(a){return Object.keys(a).length>0}initBrands(){this.dataStore$.pipe((0,p.R)((0,r.Q_)(this,d,"f"))).subscribe(a=>{const o=Object.keys(a).map(s=>a[s]);this.brandData=o.map(s=>({icon:this.brand.getIconBySymbol(s.Symbol),symbol:s.Symbol,values:[{title:s.Symbol,value:s.Name},{title:s.Industry}],capBg:{"--cui-card-cap-bg":this.brand.getColorBySymbol(s.Symbol)},labels:[...this.labels],style:[{}],data:{labels:[...this.labels],datasets:[{...z,data:[s.PERatio,s.ReturnOnEquityTTM,s.ReturnOnAssetsTTM,s.PriceToSalesRatioTTM,s.PriceToBookRatio,s.EPS,s.DividendPerShare],...J}]}})),this.updateFilteredData(this.filterText)})}ngOnDestroy(){(0,r.Q_)(this,d,"f").next(),(0,r.Q_)(this,d,"f").complete()}}d=new WeakMap,c=new WeakMap,h.\u0275fac=function(a){return new(a||h)(t.Y36(I.E),t.Y36(j.g))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-watchlist"]],decls:10,vars:4,consts:[[1,"col-lg-12","mb-3"],[1,"input-group"],["aria-label","Filter by... ","placeholder","Filter by...","type","text",1,"form-control",3,"input"],[1,"input-group-btn"],["type","button",1,"btn"],["cIcon","","name","cil-filter","size","xl"],[4,"ngIf","ngIfElse"],["loading",""],[3,"brandData","labels","withCharts"]],template:function(a,o){if(1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"input",2),t.NdJ("input",function(i){return o.updateFilterText(i)}),t.qZA(),t.TgZ(3,"span",3)(4,"button",4),t.O4$(),t._UZ(5,"svg",5),t.qZA()()()(),t.YNc(6,E,2,3,"ng-container",6),t.ALo(7,"async"),t.YNc(8,U,1,0,"ng-template",null,7,t.W1O)),2&a){const s=t.MAs(9);t.xp6(6),t.Q6J("ngIf",o.isLoaded(t.lcZ(7,2,o.dataStore$)))("ngIfElse",s)}},dependencies:[u.O5,m.ar,l.ORR,A.O,u.Ov]});const L=[{path:"",component:h,data:{title:$localize`Watchlist`}}];let P=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[v.Bz.forChild(L),v.Bz]}),n})(),N=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[P,u.ez,l.dTQ,l.dGk,m.QX,l.P4_,u.ez,l.zE6,l.qek,b.UX,l.hJ1,l.ejP,l.hJ1,l.ga2,y.N,l.FxY,l.Fme,l.U$I,T.H]}),n})()}}]);